{"version":3,"sources":["components/Dashboard/Dashboard.module.css","components/Controls/Controls.module.css","components/Controls/Controls.js","components/Balance/Balance.js","components/TransactionHistory/TransactionHistory.js","components/Dashboard/Dashboard.js","components/App.js","index.js","components/Balance/Balance.module.css","components/TransactionHistory/TransactionsHistory.module.css"],"names":["module","exports","Controls","state","value","handleValue","target","setState","Number","handleDeposit","props","onDeposit","reset","handleWithdraw","onWithdraw","this","className","styles","controls","input","type","name","onChange","button","onClick","Component","Balance","balance","income","expenses","sections","TransactionsHistory","transactions","table","head","title","transactions_body","map","item","key","id","amount","date","year","Math","floor","random","month","day","Date","toLocaleString","Dashboard","handleChangeDeposit","toast","info","localStorage","setItem","makeOperations","handleChangeWithdrawl","error","warn","t","getItem","JSON","parse","b","prevState","stringify","uuidv1","reduce","acc","dashboard","transactionsOperations","TransactionHistory","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b4b2c9c9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"Dashboard_dashboard__2J68H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__3cWl0\",\"input\":\"Controls_input__3wJaE\",\"button\":\"Controls_button__3qj2F\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Controls.module.css';\r\n\r\nexport default class Controls extends Component {\r\n  static propTypes = {\r\n    onDeposit: PropTypes.func.isRequired,\r\n    onWithdraw: PropTypes.func.isRequired,\r\n  }\r\n\r\n  state = {\r\n    value: '',\r\n  };\r\n\r\n  handleValue = ({ target }) => {\r\n    const value = target.value;\r\n    this.setState({ value: Number(value) });\r\n  };\r\n\r\n  handleDeposit = () => {\r\n    this.props.onDeposit(this.state.value);\r\n    this.reset();\r\n  };\r\n\r\n  handleWithdraw = () => {\r\n    this.props.onWithdraw(this.state.value);\r\n    this.reset();\r\n  };\r\n\r\n  reset = () => {\r\n    this.setState({ value: '' });\r\n  };\r\n\r\n  render() {\r\n    const { value } = this.state;\r\n    return (\r\n      <section className={styles.controls}>\r\n        <input className={styles.input} \r\n        type=\"number\" \r\n        name=\"amount\" \r\n        value={value} \r\n        onChange={this.handleValue} />\r\n        <button className={styles.button} \r\n        type=\"button\" \r\n        onClick={this.handleDeposit}>\r\n          Deposit\r\n        </button>\r\n        <button className={styles.button} \r\n        type=\"button\" \r\n        onClick={this.handleWithdraw}>\r\n          Withdraw\r\n        </button>\r\n      </section>\r\n    );\r\n}\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Balance.module.css';\r\n\r\nconst Balance = ({balance, income, expenses}) => {\r\n  return (\r\n    <section className={styles.sections}>\r\n        <span className={styles.income}>⬆{income}$</span>\r\n        <span className={styles.expenses}>⬇{expenses}$</span>\r\n      <span className={styles.balance}>Balance: {balance}$</span>\r\n    </section>\r\n  );\r\n};\r\n\r\nBalance.propTypes = {\r\n  income: PropTypes.number.isRequired,\r\n  expenses: PropTypes.number.isRequired,\r\n  balance: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Balance;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './TransactionsHistory.module.css';\r\n\r\nconst TransactionsHistory = ({ transactions }) => {\r\n  return (\r\n    <table className={styles.table}>\r\n      <thead className={styles.head}>\r\n        <tr className={styles.title}>\r\n          <th>Transaction</th>\r\n          <th>Amount</th>\r\n          <th>Date</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody className={styles.transactions_body}>\r\n      {transactions\r\n            .map(item => (\r\n              <tr key={item.id}>\r\n                <td>{item.type}</td>\r\n                <td>{item.amount}$</td>\r\n                <td>{item.date}</td>\r\n              </tr>\r\n            ))\r\n          }\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nTransactionsHistory.propTypes = {\r\n  transactions: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    type: PropTypes.string.isRequired,\r\n    amount: PropTypes.number.isRequired,\r\n    date: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n};\r\n\r\nexport default TransactionsHistory;\r\n","import React, { Component } from 'react';\r\nimport Controls from '../Controls/Controls';\r\nimport Balance from '../Balance/Balance';\r\nimport TransactionHistory from '../TransactionHistory/TransactionHistory';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport styles from './Dashboard.module.css';\r\nimport uuidv1 from 'uuid/v1';\r\n\r\nconst date = () => {\r\n  const year = Math.floor(Math.random() * (2019 - 2011) + 2011);\r\n  const month = Math.floor(Math.random() * 12 + 1);\r\n  const day = Math.floor(Math.random() * 30 + 1);\r\n  const newDate = new Date(year, month, day).toLocaleString('en-US');\r\n  return newDate;\r\n};\r\n\r\nexport default class Dashboard extends Component {\r\n  state = {\r\n    transactions: [],\r\n    balance: 0,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const t = localStorage.getItem('transactions');\r\n    if (t) {\r\n      this.setState({ transactions: JSON.parse(t) });\r\n    }\r\n    const b = localStorage.getItem('balance');\r\n    if (b) {\r\n      this.setState({ balance: JSON.parse(b) });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevState) {\r\n    const { transactions, balance } = this.state;\r\n\r\n    if (transactions !== prevState.transactions) {\r\n      localStorage.setItem(\r\n        'transactions',\r\n        JSON.stringify(transactions),\r\n      )  \r\n    }\r\n    if (balance !== prevState.balance) {\r\n      localStorage.setItem(\r\n        'balance',\r\n        JSON.stringify(balance),\r\n      )\r\n  }\r\n}\r\n\r\n  handleChangeDeposit = amount => {\r\n  if (amount === null || amount <= 0) {\r\n    toast.info('Введите сумму для проведения операции!');\r\n    return\r\n  }\r\n  this.setState(({ transactions, balance }) => {\r\n    localStorage.setItem(transactions, balance);\r\n    return {\r\n      transactions: [...transactions, this.makeOperations(amount, 'deposit')],\r\n      balance: balance + amount,\r\n    };\r\n    \r\n  })\r\n}\r\n\r\n  handleChangeWithdrawl = amount => {\r\n    if (amount <= 0) {\r\n      toast.error('Некорректно введена сумма! Невозможно провести операцию!');\r\n      return;\r\n    }\r\n    if (amount > this.state.balance ) {\r\n      toast.warn('На счету недостаточно средств для проведения операции!');\r\n      return;\r\n    }  \r\n  this.setState(({ transactions, balance }) => {\r\n    return {\r\n      transactions: [...transactions, this.makeOperations(amount, 'withdrawal')],\r\n      balance: balance - amount,\r\n    };\r\n  });\r\n}\r\n\r\n    makeOperations(amount, type) {\r\n      const newOperation = {\r\n        type: type,\r\n        id: uuidv1(),\r\n        amount: amount,\r\n        date: date(),\r\n      };\r\n      return newOperation;\r\n    }\r\n\r\ntransactionsOperations(type) {\r\nconst { transactions } = this.state;\r\n    return [...transactions].reduce((acc, item) => {\r\n      if (item.type === type) {\r\n        return acc + item.amount;\r\n      }\r\n      return acc;\r\n    }, 0);\r\n  }\r\n\r\n  render() {\r\n    const { transactions, balance } = this.state;\r\n\r\n    return (\r\n      <div className={styles.dashboard}>\r\n        <Controls\r\n          onDeposit={this.handleChangeDeposit}\r\n          onWithdraw={this.handleChangeWithdrawl}\r\n        />\r\n          <Balance \r\n            balance={balance} \r\n            income={this.transactionsOperations('deposit')} \r\n            expenses={this.transactionsOperations('withdrawal')}\r\n            />\r\n              <TransactionHistory transactions={transactions} />\r\n                <ToastContainer />\r\n        </div>\r\n    );\r\n  }\r\n  }\r\n\r\n","import React from 'react';\r\nimport Dashboard from '../components/Dashboard/Dashboard';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <Dashboard />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sections\":\"Balance_sections__3010k\",\"income\":\"Balance_income__Pzv5y\",\"expenses\":\"Balance_expenses__2UbTF\",\"balance\":\"Balance_balance__2YCyb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"TransactionsHistory_table__3DJjB\",\"head\":\"TransactionsHistory_head__1KaWk\",\"title\":\"TransactionsHistory_title__JOfaU\",\"transactions_body\":\"TransactionsHistory_transactions_body__OhKvV\"};"],"sourceRoot":""}